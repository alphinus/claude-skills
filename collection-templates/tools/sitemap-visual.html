<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{BRAND_NAME}} - Visuelle Sitemap</title>
<style>
  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
  :root{--dark-bg:{{BG}};--cyan:{{PRIMARY}};--cyan-dark:{{PRIMARY_DARK}};--cloud:{{TEXT}};--muted:{{MUTED}};--surface:#1e293b;--border:rgba(255,255,255,.06)}
  body{font-family:system-ui,-apple-system,sans-serif;background:var(--dark-bg);color:var(--cloud);min-height:100vh;padding:40px 20px;overflow-x:auto}
  .container{max-width:1200px;margin:0 auto}
  h1{text-align:center;font-size:2.2rem;font-weight:700;margin-bottom:6px;background:linear-gradient(135deg,var(--cyan),var(--cyan-dark));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
  .subtitle{text-align:center;color:var(--muted);margin-bottom:48px}

  /* Legend */
  .legend{display:flex;justify-content:center;gap:20px;margin-bottom:40px;flex-wrap:wrap}
  .legend-item{display:flex;align-items:center;gap:6px;font-size:.82rem;color:var(--muted)}
  .legend-dot{width:12px;height:12px;border-radius:4px}

  /* Tree */
  .tree{padding-left:0}
  .tree,.tree ul{list-style:none}
  .tree ul{padding-left:40px;position:relative}
  .tree ul::before{content:'';position:absolute;left:18px;top:0;bottom:20px;width:1px;background:rgba(255,255,255,.08)}
  .tree li{position:relative;padding:6px 0}
  .tree ul li::before{content:'';position:absolute;left:-22px;top:24px;width:22px;height:1px;background:rgba(255,255,255,.08)}

  /* Node */
  .node{display:inline-flex;align-items:center;gap:12px;padding:12px 18px;background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:12px;cursor:pointer;transition:all .2s;user-select:none;position:relative}
  .node:hover{background:rgba(255,255,255,.07);border-color:rgba(255,255,255,.12);transform:translateX(2px)}
  .node.has-children .toggle-icon{display:flex}
  .toggle-icon{display:none;width:20px;height:20px;border-radius:6px;background:rgba(255,255,255,.06);align-items:center;justify-content:center;flex-shrink:0;transition:transform .2s}
  .toggle-icon svg{width:12px;height:12px;fill:var(--muted);transition:transform .25s}
  .node.collapsed .toggle-icon svg{transform:rotate(-90deg)}
  .node-color{width:10px;height:10px;border-radius:3px;flex-shrink:0}
  .node-info{display:flex;flex-direction:column}
  .node-name{font-size:.9rem;font-weight:600}
  .node-path{font-size:.7rem;color:var(--muted);font-family:monospace;margin-top:1px}

  /* Color Coding */
  .c-home{background:var(--cyan)}
  .c-marketing{background:#9f7aea}
  .c-docs{background:#48bb78}
  .c-dashboard{background:#ed8936}
  .c-settings{background:#fc8181}

  /* Collapsed children */
  .tree li.collapsed>ul{display:none}

  /* Node count badge */
  .node-count{font-size:.65rem;background:rgba(255,255,255,.08);padding:2px 8px;border-radius:8px;color:var(--muted);margin-left:4px}
</style>
</head>
<body>
<div class="container">
  <h1>Visuelle Sitemap</h1>
  <p class="subtitle">Seitenstruktur des {{BRAND_NAME}}-Oekosystems</p>

  <div class="legend">
    <div class="legend-item"><div class="legend-dot c-home"></div> Startseite</div>
    <div class="legend-item"><div class="legend-dot c-marketing"></div> Marketing</div>
    <div class="legend-item"><div class="legend-dot c-docs"></div> Dokumentation</div>
    <div class="legend-item"><div class="legend-dot c-dashboard"></div> Dashboard</div>
    <div class="legend-item"><div class="legend-dot c-settings"></div> Einstellungen</div>
  </div>

  <ul class="tree" id="siteTree"></ul>
</div>

<script>
const sitemap={
  name:"Home",path:"/",color:"c-home",children:[
    {name:"Features",path:"/features",color:"c-marketing"},
    {name:"Preise",path:"/pricing",color:"c-marketing"},
    {name:"Blog",path:"/blog",color:"c-marketing",children:[
      {name:"Artikel",path:"/blog/articles",color:"c-marketing"},
      {name:"Tutorials",path:"/blog/tutorials",color:"c-marketing"},
      {name:"Changelog",path:"/blog/changelog",color:"c-marketing"}
    ]},
    {name:"Ueber uns",path:"/about",color:"c-marketing",children:[
      {name:"Team",path:"/about/team",color:"c-marketing"},
      {name:"Karriere",path:"/about/careers",color:"c-marketing"},
      {name:"Kontakt",path:"/about/contact",color:"c-marketing"}
    ]},
    {name:"Dokumentation",path:"/docs",color:"c-docs",children:[
      {name:"Erste Schritte",path:"/docs/getting-started",color:"c-docs"},
      {name:"API-Referenz",path:"/docs/api",color:"c-docs",children:[
        {name:"Authentifizierung",path:"/docs/api/auth",color:"c-docs"},
        {name:"Events",path:"/docs/api/events",color:"c-docs"},
        {name:"Streams",path:"/docs/api/streams",color:"c-docs"},
        {name:"Webhooks",path:"/docs/api/webhooks",color:"c-docs"}
      ]},
      {name:"Events",path:"/docs/events",color:"c-docs"},
      {name:"Integrationen",path:"/docs/integrations",color:"c-docs",children:[
        {name:"Slack",path:"/docs/integrations/slack",color:"c-docs"},
        {name:"Discord",path:"/docs/integrations/discord",color:"c-docs"},
        {name:"Zapier",path:"/docs/integrations/zapier",color:"c-docs"}
      ]},
      {name:"SDK",path:"/docs/sdk",color:"c-docs",children:[
        {name:"JavaScript",path:"/docs/sdk/javascript",color:"c-docs"},
        {name:"Python",path:"/docs/sdk/python",color:"c-docs"},
        {name:"Go",path:"/docs/sdk/go",color:"c-docs"}
      ]}
    ]},
    {name:"Dashboard",path:"/dashboard",color:"c-dashboard",children:[
      {name:"Events",path:"/dashboard/events",color:"c-dashboard",children:[
        {name:"Event-Liste",path:"/dashboard/events/list",color:"c-dashboard"},
        {name:"Event-Explorer",path:"/dashboard/events/explorer",color:"c-dashboard"}
      ]},
      {name:"Streams",path:"/dashboard/streams",color:"c-dashboard",children:[
        {name:"Uebersicht",path:"/dashboard/streams/overview",color:"c-dashboard"},
        {name:"Stream erstellen",path:"/dashboard/streams/create",color:"c-dashboard"}
      ]},
      {name:"AI Studio",path:"/dashboard/ai-studio",color:"c-dashboard",children:[
        {name:"Analyse",path:"/dashboard/ai-studio/analysis",color:"c-dashboard"},
        {name:"Vorhersagen",path:"/dashboard/ai-studio/predictions",color:"c-dashboard"},
        {name:"Anomalien",path:"/dashboard/ai-studio/anomalies",color:"c-dashboard"}
      ]},
      {name:"Einstellungen",path:"/dashboard/settings",color:"c-settings",children:[
        {name:"Profil",path:"/dashboard/settings/profile",color:"c-settings"},
        {name:"Sicherheit",path:"/dashboard/settings/security",color:"c-settings"},
        {name:"API-Keys",path:"/dashboard/settings/api-keys",color:"c-settings"},
        {name:"Benachrichtigungen",path:"/dashboard/settings/notifications",color:"c-settings"}
      ]},
      {name:"Team",path:"/dashboard/team",color:"c-dashboard",children:[
        {name:"Mitglieder",path:"/dashboard/team/members",color:"c-dashboard"},
        {name:"Rollen",path:"/dashboard/team/roles",color:"c-dashboard"}
      ]}
    ]}
  ]
};

function countDescendants(node){
  if(!node.children)return 0;
  let count=node.children.length;
  node.children.forEach(c=>{count+=countDescendants(c)});
  return count;
}

function buildTree(data,parent){
  const li=document.createElement('li');
  const hasChildren=data.children&&data.children.length>0;
  const node=document.createElement('div');
  node.className='node'+(hasChildren?' has-children':'');

  let html='';
  if(hasChildren){
    html+=`<div class="toggle-icon"><svg viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg></div>`;
  }
  html+=`<div class="node-color ${data.color}"></div>`;
  html+=`<div class="node-info"><div class="node-name">${data.name}</div><div class="node-path">${data.path}</div></div>`;
  if(hasChildren){
    html+=`<span class="node-count">${countDescendants(data)} Seiten</span>`;
  }
  node.innerHTML=html;

  if(hasChildren){
    node.addEventListener('click',()=>{
      li.classList.toggle('collapsed');
      node.classList.toggle('collapsed');
    });
  }

  li.appendChild(node);

  if(hasChildren){
    const ul=document.createElement('ul');
    data.children.forEach(child=>buildTree(child,ul));
    li.appendChild(ul);
  }

  parent.appendChild(li);
}

buildTree(sitemap,document.getElementById('siteTree'));
</script>
</body>
</html>
