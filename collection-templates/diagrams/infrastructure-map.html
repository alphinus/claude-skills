<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{BRAND_NAME}} Infrastruktur-Übersicht</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{background:{{BG}};font-family:system-ui,-apple-system,sans-serif;color:{{TEXT}};min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:40px 20px}
  h1{font-size:2rem;font-weight:700;letter-spacing:-.5px;margin-bottom:8px}
  h1 span{color:{{PRIMARY}}}
  .subtitle{color:{{MUTED}};font-size:.95rem;margin-bottom:32px}
  .diagram-wrap{background:#1e293b;border-radius:16px;border:1px solid rgba({{PRIMARY_RGB}},.15);padding:32px;max-width:1300px;width:100%;overflow-x:auto}
  svg text{font-family:system-ui,-apple-system,sans-serif}

  @keyframes pulse-health{0%,100%{opacity:.6}50%{opacity:1}}
  @keyframes dashFlow{to{stroke-dashoffset:-20}}
  .health-dot{animation:pulse-health 2s ease-in-out infinite}
  .net-flow{stroke-dasharray:8 4;animation:dashFlow 1.5s linear infinite}
</style>
</head>
<body>

<h1><span>{{BRAND_NAME}}</span> Infrastruktur-Übersicht</h1>
<p class="subtitle">Deployment-Architektur &mdash; Region EU-West (Zürich) &mdash; Produktionsumgebung</p>

<div class="diagram-wrap">
<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg" style="width:100%;height:auto">
  <defs>
    <marker id="ar" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0,8 3,0 6" fill="{{PRIMARY}}"/>
    </marker>
    <marker id="ar-p" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0,8 3,0 6" fill="#a78bfa"/>
    </marker>
    <marker id="ar-b" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0,8 3,0 6" fill="{{INFO}}"/>
    </marker>
    <filter id="glow"><feDropShadow dx="0" dy="0" stdDeviation="3" flood-color="{{PRIMARY}}" flood-opacity=".2"/></filter>
    <filter id="glow-g"><feDropShadow dx="0" dy="0" stdDeviation="3" flood-color="{{SUCCESS}}" flood-opacity=".2"/></filter>
    <filter id="glow-p"><feDropShadow dx="0" dy="0" stdDeviation="3" flood-color="#a78bfa" flood-opacity=".2"/></filter>
  </defs>

  <!-- ========= MONITORING LAYER (TOP) ========= -->
  <rect x="30" y="20" width="1140" height="80" rx="12" fill="none" stroke="{{WARNING}}" stroke-width="1.5" stroke-dasharray="8 4"/>
  <text x="50" y="44" fill="{{WARNING}}" font-size="11" font-weight="700" letter-spacing="1">MONITORING &amp; OBSERVABILITY</text>
  <g transform="translate(50,55)">
    <rect width="160" height="32" rx="6" fill="#2a2a1a" stroke="{{WARNING}}" stroke-width="1"/>
    <circle cx="14" cy="16" r="5" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="26" y="20" fill="{{TEXT}}" font-size="10" font-weight="600">Metriken &amp; Logs</text>
  </g>
  <g transform="translate(230,55)">
    <rect width="160" height="32" rx="6" fill="#2a2a1a" stroke="{{WARNING}}" stroke-width="1"/>
    <circle cx="14" cy="16" r="5" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="26" y="20" fill="{{TEXT}}" font-size="10" font-weight="600">Alerting (PagerDuty)</text>
  </g>
  <g transform="translate(410,55)">
    <rect width="160" height="32" rx="6" fill="#2a2a1a" stroke="{{WARNING}}" stroke-width="1"/>
    <circle cx="14" cy="16" r="5" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="26" y="20" fill="{{TEXT}}" font-size="10" font-weight="600">Health Checks</text>
  </g>
  <g transform="translate(590,55)">
    <rect width="160" height="32" rx="6" fill="#2a2a1a" stroke="{{WARNING}}" stroke-width="1"/>
    <circle cx="14" cy="16" r="5" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="26" y="20" fill="{{TEXT}}" font-size="10" font-weight="600">Uptime Monitoring</text>
  </g>

  <!-- ========= REGION BOUNDARY ========= -->
  <rect x="30" y="120" width="780" height="660" rx="16" fill="none" stroke="{{PRIMARY}}" stroke-width="1" stroke-dasharray="10 5" opacity=".4"/>
  <text x="50" y="144" fill="{{PRIMARY}}" font-size="12" font-weight="700" letter-spacing="1" opacity=".6">REGION: EU-WEST (ZÜRICH)</text>
  <!-- Swiss flag icon -->
  <g transform="translate(260,130)">
    <rect width="18" height="14" rx="2" fill="{{ERROR}}" opacity=".7"/>
    <rect x="7" y="3" width="4" height="8" rx="1" fill="#fff"/>
    <rect x="5" y="5" width="8" height="4" rx="1" fill="#fff"/>
  </g>

  <!-- ========= CDN ========= -->
  <g filter="url(#glow)" transform="translate(60,180)">
    <rect width="200" height="90" rx="12" fill="#132332" stroke="{{INFO}}" stroke-width="1.5"/>
    <circle cx="24" cy="24" r="8" fill="{{SUCCESS}}" class="health-dot" opacity=".8"/>
    <text x="100" y="36" text-anchor="middle" fill="{{INFO}}" font-size="10" font-weight="600" letter-spacing="1">CDN / EDGE</text>
    <text x="100" y="56" text-anchor="middle" fill="{{TEXT}}" font-size="14" font-weight="700">Cloudflare CDN</text>
    <text x="100" y="74" text-anchor="middle" fill="{{MUTED}}" font-size="10">TLS &bull; Cache &bull; DDoS-Schutz</text>
  </g>

  <!-- ========= LOAD BALANCER ========= -->
  <g filter="url(#glow)" transform="translate(60,310)">
    <rect width="200" height="90" rx="12" fill="#132332" stroke="{{PRIMARY}}" stroke-width="1.5"/>
    <circle cx="24" cy="24" r="8" fill="{{SUCCESS}}" class="health-dot" opacity=".8"/>
    <text x="100" y="36" text-anchor="middle" fill="{{PRIMARY}}" font-size="10" font-weight="600" letter-spacing="1">LOAD BALANCER</text>
    <text x="100" y="56" text-anchor="middle" fill="{{TEXT}}" font-size="14" font-weight="700">Nginx / HAProxy</text>
    <text x="100" y="74" text-anchor="middle" fill="{{MUTED}}" font-size="10">Round-Robin &bull; Health Check</text>
  </g>

  <!-- Arrow CDN -> LB -->
  <line x1="160" y1="270" x2="160" y2="307" class="net-flow" stroke="{{PRIMARY}}" stroke-width="2" marker-end="url(#ar)"/>
  <text x="170" y="292" fill="{{MUTED}}" font-size="9">HTTPS</text>

  <!-- ========= APP SERVERS ========= -->
  <!-- Server 1 -->
  <g filter="url(#glow)" transform="translate(340,180)">
    <rect width="180" height="80" rx="12" fill="#132332" stroke="{{PRIMARY}}" stroke-width="1.5"/>
    <circle cx="20" cy="20" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="90" y="32" text-anchor="middle" fill="{{PRIMARY}}" font-size="9" font-weight="600">APP SERVER 1</text>
    <text x="90" y="50" text-anchor="middle" fill="{{TEXT}}" font-size="13" font-weight="700">Express + Node</text>
    <text x="90" y="66" text-anchor="middle" fill="{{MUTED}}" font-size="9">PM2 &bull; Port 3001</text>
  </g>

  <!-- Server 2 -->
  <g filter="url(#glow)" transform="translate(340,290)">
    <rect width="180" height="80" rx="12" fill="#132332" stroke="{{PRIMARY}}" stroke-width="1.5"/>
    <circle cx="20" cy="20" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="90" y="32" text-anchor="middle" fill="{{PRIMARY}}" font-size="9" font-weight="600">APP SERVER 2</text>
    <text x="90" y="50" text-anchor="middle" fill="{{TEXT}}" font-size="13" font-weight="700">Express + Node</text>
    <text x="90" y="66" text-anchor="middle" fill="{{MUTED}}" font-size="9">PM2 &bull; Port 3002</text>
  </g>

  <!-- Server 3 -->
  <g filter="url(#glow)" transform="translate(340,400)">
    <rect width="180" height="80" rx="12" fill="#132332" stroke="{{PRIMARY}}" stroke-width="1.5"/>
    <circle cx="20" cy="20" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="90" y="32" text-anchor="middle" fill="{{PRIMARY}}" font-size="9" font-weight="600">APP SERVER 3</text>
    <text x="90" y="50" text-anchor="middle" fill="{{TEXT}}" font-size="13" font-weight="700">Express + Node</text>
    <text x="90" y="66" text-anchor="middle" fill="{{MUTED}}" font-size="9">PM2 &bull; Port 3003</text>
  </g>

  <!-- LB -> Servers -->
  <line x1="260" y1="340" x2="337" y2="220" class="net-flow" stroke="{{PRIMARY}}" stroke-width="1.5" marker-end="url(#ar)"/>
  <line x1="260" y1="355" x2="337" y2="330" class="net-flow" stroke="{{PRIMARY}}" stroke-width="1.5" marker-end="url(#ar)"/>
  <line x1="260" y1="370" x2="337" y2="440" class="net-flow" stroke="{{PRIMARY}}" stroke-width="1.5" marker-end="url(#ar)"/>

  <!-- ========= EVENT STORE ========= -->
  <g filter="url(#glow-g)" transform="translate(600,280)">
    <rect width="180" height="110" rx="12" fill="#132332" stroke="{{SUCCESS}}" stroke-width="1.5"/>
    <circle cx="20" cy="20" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="90" y="32" text-anchor="middle" fill="{{SUCCESS}}" font-size="9" font-weight="600" letter-spacing="1">EVENT STORE</text>
    <text x="90" y="54" text-anchor="middle" fill="{{TEXT}}" font-size="14" font-weight="700">JSONL Store</text>
    <text x="90" y="72" text-anchor="middle" fill="{{MUTED}}" font-size="10">Append-Only &bull; Komprimiert</text>
    <text x="90" y="90" text-anchor="middle" fill="{{MUTED}}" font-size="9">NVMe SSD &bull; 500 GB</text>
    <!-- Capacity bar -->
    <rect x="20" y="96" width="140" height="6" rx="3" fill="#1e293b"/>
    <rect x="20" y="96" width="56" height="6" rx="3" fill="{{SUCCESS}}" opacity=".7"/>
  </g>

  <!-- Servers -> Event Store -->
  <line x1="520" y1="220" x2="597" y2="310" class="net-flow" stroke="{{SUCCESS}}" stroke-width="1.5" marker-end="url(#ar)"/>
  <line x1="520" y1="330" x2="597" y2="335" class="net-flow" stroke="{{SUCCESS}}" stroke-width="1.5" marker-end="url(#ar)"/>
  <line x1="520" y1="440" x2="597" y2="360" class="net-flow" stroke="{{SUCCESS}}" stroke-width="1.5" marker-end="url(#ar)"/>

  <!-- ========= BACKUP ========= -->
  <g filter="url(#glow-g)" transform="translate(600,440)">
    <rect width="180" height="90" rx="12" fill="#132332" stroke="{{SUCCESS}}" stroke-width="1" stroke-dasharray="4 2"/>
    <circle cx="20" cy="20" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="90" y="32" text-anchor="middle" fill="{{SUCCESS}}" font-size="9" font-weight="600" letter-spacing="1">BACKUP</text>
    <text x="90" y="54" text-anchor="middle" fill="{{TEXT}}" font-size="13" font-weight="700">S3 Backup</text>
    <text x="90" y="72" text-anchor="middle" fill="{{MUTED}}" font-size="10">Täglich &bull; 30-Tage Rotation</text>
    <text x="90" y="86" text-anchor="middle" fill="{{MUTED}}" font-size="9">Verschlüsselt (AES-256)</text>
  </g>

  <!-- Event Store -> Backup -->
  <line x1="690" y1="390" x2="690" y2="437" class="net-flow" stroke="{{SUCCESS}}" stroke-width="1.5" marker-end="url(#ar)"/>
  <text x="700" y="420" fill="{{MUTED}}" font-size="9">rsync</text>

  <!-- ========= BOT SERVER ========= -->
  <g filter="url(#glow)" transform="translate(340,540)">
    <rect width="180" height="90" rx="12" fill="#132332" stroke="{{PRIMARY}}" stroke-width="1.5"/>
    <circle cx="20" cy="20" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="90" y="32" text-anchor="middle" fill="{{PRIMARY}}" font-size="9" font-weight="600" letter-spacing="1">BOT SERVER</text>
    <text x="90" y="54" text-anchor="middle" fill="{{TEXT}}" font-size="14" font-weight="700">grammY Bot</text>
    <text x="90" y="72" text-anchor="middle" fill="{{MUTED}}" font-size="10">Long Polling &bull; Worker</text>
    <text x="90" y="86" text-anchor="middle" fill="{{MUTED}}" font-size="9">PM2 &bull; Port 3010</text>
  </g>

  <!-- Server -> Bot -->
  <line x1="430" y1="480" x2="430" y2="537" class="net-flow" stroke="{{PRIMARY}}" stroke-width="1" marker-end="url(#ar)"/>

  <!-- ========= VITE DEV / BUILD SERVER ========= -->
  <g filter="url(#glow)" transform="translate(60,540)">
    <rect width="200" height="90" rx="12" fill="#132332" stroke="{{INFO}}" stroke-width="1.5"/>
    <circle cx="24" cy="24" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="100" y="36" text-anchor="middle" fill="{{INFO}}" font-size="9" font-weight="600" letter-spacing="1">STATIC ASSETS</text>
    <text x="100" y="56" text-anchor="middle" fill="{{TEXT}}" font-size="14" font-weight="700">Vite Build</text>
    <text x="100" y="74" text-anchor="middle" fill="{{MUTED}}" font-size="10">React SPA &bull; dist/</text>
    <text x="100" y="88" text-anchor="middle" fill="{{MUTED}}" font-size="9">Served via CDN</text>
  </g>

  <!-- Vite -> CDN -->
  <path d="M160,540 L160,500 Q160,470 140,460 Q100,440 80,420 Q60,400 60,360 Q60,290 100,270" fill="none" class="net-flow" stroke="{{INFO}}" stroke-width="1" marker-end="url(#ar-b)"/>

  <!-- ========= EXTERNAL SERVICES (RIGHT SIDE) ========= -->
  <rect x="840" y="120" width="340" height="560" rx="16" fill="none" stroke="#a78bfa" stroke-width="1" stroke-dasharray="10 5" opacity=".3"/>
  <text x="860" y="144" fill="#a78bfa" font-size="12" font-weight="700" letter-spacing="1" opacity=".6">EXTERNE DIENSTE</text>

  <!-- Telegram API -->
  <g filter="url(#glow-p)" transform="translate(870,170)">
    <rect width="280" height="90" rx="12" fill="#1e1a2e" stroke="#a78bfa" stroke-width="1.5"/>
    <circle cx="20" cy="20" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="140" y="30" text-anchor="middle" fill="#a78bfa" font-size="9" font-weight="600" letter-spacing="1">TELEGRAM</text>
    <text x="140" y="50" text-anchor="middle" fill="{{TEXT}}" font-size="14" font-weight="700">Telegram Bot API v7</text>
    <text x="140" y="68" text-anchor="middle" fill="{{MUTED}}" font-size="10">api.telegram.org &bull; HTTPS</text>
    <text x="140" y="82" text-anchor="middle" fill="{{MUTED}}" font-size="9">Webhook / Long Polling</text>
  </g>

  <!-- AI Provider -->
  <g filter="url(#glow-p)" transform="translate(870,290)">
    <rect width="280" height="90" rx="12" fill="#1e1a2e" stroke="#a78bfa" stroke-width="1.5"/>
    <circle cx="20" cy="20" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="140" y="30" text-anchor="middle" fill="#a78bfa" font-size="9" font-weight="600" letter-spacing="1">KI-ANBIETER</text>
    <text x="140" y="50" text-anchor="middle" fill="{{TEXT}}" font-size="14" font-weight="700">OpenAI / Anthropic</text>
    <text x="140" y="68" text-anchor="middle" fill="{{MUTED}}" font-size="10">AI SDK v6 &bull; Streaming</text>
    <text x="140" y="82" text-anchor="middle" fill="{{MUTED}}" font-size="9">GPT-4o &bull; Claude &bull; Gemini</text>
  </g>

  <!-- Webhook Endpoints -->
  <g filter="url(#glow-p)" transform="translate(870,410)">
    <rect width="280" height="90" rx="12" fill="#1e1a2e" stroke="#a78bfa" stroke-width="1.5"/>
    <circle cx="20" cy="20" r="6" fill="{{WARNING}}" class="health-dot"/>
    <text x="140" y="30" text-anchor="middle" fill="#a78bfa" font-size="9" font-weight="600" letter-spacing="1">WEBHOOK-ENDPUNKTE</text>
    <text x="140" y="50" text-anchor="middle" fill="{{TEXT}}" font-size="14" font-weight="700">Drittanbieter-APIs</text>
    <text x="140" y="68" text-anchor="middle" fill="{{MUTED}}" font-size="10">Konfigurierbare Ziele</text>
    <text x="140" y="82" text-anchor="middle" fill="{{MUTED}}" font-size="9">HMAC-signierte Payloads</text>
  </g>

  <!-- DNS / Domain -->
  <g filter="url(#glow-p)" transform="translate(870,530)">
    <rect width="280" height="70" rx="12" fill="#1e1a2e" stroke="#a78bfa" stroke-width="1"/>
    <circle cx="20" cy="20" r="6" fill="{{SUCCESS}}" class="health-dot"/>
    <text x="140" y="28" text-anchor="middle" fill="#a78bfa" font-size="9" font-weight="600" letter-spacing="1">DNS</text>
    <text x="140" y="48" text-anchor="middle" fill="{{TEXT}}" font-size="13" font-weight="700">{{BRAND_NAME_LOWER}}.io</text>
    <text x="140" y="62" text-anchor="middle" fill="{{MUTED}}" font-size="9">Cloudflare DNS &bull; DNSSEC</text>
  </g>

  <!-- ========= CROSS-BOUNDARY ARROWS ========= -->

  <!-- Servers -> Telegram -->
  <line x1="520" y1="590" x2="867" y2="215" class="net-flow" stroke="#a78bfa" stroke-width="1.5" marker-end="url(#ar-p)"/>

  <!-- Servers -> AI Provider -->
  <line x1="520" y1="340" x2="867" y2="340" class="net-flow" stroke="#a78bfa" stroke-width="1.5" marker-end="url(#ar-p)"/>

  <!-- Servers -> Webhook -->
  <line x1="520" y1="430" x2="867" y2="455" class="net-flow" stroke="#a78bfa" stroke-width="1.5" marker-end="url(#ar-p)"/>

  <!-- ========= LEGEND ========= -->
  <g transform="translate(60,680)">
    <rect width="680" height="70" rx="10" fill="{{BG}}" stroke="#334155" stroke-width="1"/>
    <text x="16" y="22" fill="{{TEXT}}" font-size="11" font-weight="600">Legende</text>
    <!-- Health dot -->
    <circle cx="24" cy="44" r="5" fill="{{SUCCESS}}"/><text x="36" y="48" fill="#cbd5e1" font-size="10">Gesund</text>
    <circle cx="114" cy="44" r="5" fill="{{WARNING}}"/><text x="126" y="48" fill="#cbd5e1" font-size="10">Warnung</text>
    <circle cx="204" cy="44" r="5" fill="{{ERROR}}"/><text x="216" y="48" fill="#cbd5e1" font-size="10">Fehler</text>
    <!-- Lines -->
    <line x1="290" y1="44" x2="326" y2="44" stroke="{{PRIMARY}}" stroke-width="1.5" stroke-dasharray="4 2"/>
    <text x="332" y="48" fill="#cbd5e1" font-size="10">Internes Netz</text>
    <line x1="430" y1="44" x2="466" y2="44" stroke="#a78bfa" stroke-width="1.5" stroke-dasharray="4 2"/>
    <text x="472" y="48" fill="#cbd5e1" font-size="10">Externes Netz</text>
    <rect x="570" y="37" width="24" height="14" rx="3" fill="none" stroke="{{MUTED}}" stroke-width="1" stroke-dasharray="4 2"/>
    <text x="600" y="48" fill="#cbd5e1" font-size="10">Boundary</text>
  </g>

</svg>
</div>

</body>
</html>
